# GitHub Unicoder

GitHub上のUnicodeエスケープシーケンスと16進エスケープシーケンスを読みやすいテキストに変換して表示するChrome拡張機能です。

## 機能

- **Unicode変換**: 
  - `\u30AD\u30E3\u30F3\u30BB\u30EB` → `キャンセル` のように、Unicodeエスケープシーケンスを実際の文字に変換
  - `\x41\x42\x43` → `ABC` のように、16進エスケープシーケンスを実際の文字に変換
- **ワンクリック操作**: 拡張機能アイコンを直接クリックしてON/OFF切り替え
- **初期状態ON**: インストール後、すぐに変換機能が有効
- **視覚的フィードバック**: 
  - 変換された要素には点線ボーダーが表示
  - アイコンの色で「ON」（通常色）/「OFF」（グレーアウト）状態を表示
- **効率的な処理**: 既に処理済みの要素は再処理しません
- **GitHub特化**: GitHubのコードビューやファイル表示に最適化
- **リアルタイム変換**: DOM変更を監視し、動的に追加される要素も自動変換

## 使用方法

### 基本的な使い方

1. GitHub.com のページを開く
2. 拡張機能アイコンをクリック（トグル動作）
3. ページが自動的にリロードされ、Unicodeエスケープシーケンスが変換される

### 状態の確認

- **アイコンの色**: 通常色（ON）またはグレーアウト（OFF）で現在の状態を表示
- **変換済み要素**: 点線ボーダーで囲まれて表示
- **初期状態**: インストール直後から有効（ON）

## 対象となる場面

- Unityプロジェクトなどで日本語テキストがUnicodeエスケープされている場合
- C/C++やJavaScriptなどで16進エスケープシーケンスが使用されている場合
- プルリクエストのレビュー時に文字列の内容を確認したい場合
- コードの可読性を向上させたい場合

## インストール方法

### 開発版のインストール

1. このリポジトリをクローンまたはダウンロード
2. 依存関係をインストール
3. プロジェクトをビルド
4. Chrome拡張機能として読み込み

```bash
# 1. リポジトリのクローン
git clone <repository-url>
cd UnicoderForChrome

# 2. 依存関係のインストール
npm install

# 3. プロジェクトのビルド
npm run build
```

### Chrome拡張機能として読み込む手順

1. Chromeブラウザを開く
2. アドレスバーに `chrome://extensions/` と入力
3. 右上の「デベロッパーモード」をONにする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. プロジェクトの `dist` フォルダを選択
6. 拡張機能が読み込まれ、ツールバーにアイコンが表示される

### 動作確認

1. GitHub.com にアクセス
2. 任意のリポジトリのコードファイルを開く
3. Unicodeエスケープシーケンス（例: `\u30AD\u30E3\u30F3\u30BB\u30EB`）や16進エスケープシーケンス（例: `\x41\x42\x43`）が含まれるファイルを作成
4. 拡張機能アイコンをクリックしてトグルをONにする（デフォルトでON）
5. ページがリロードされ、変換が適用されることを確認

## 開発

### 環境要件

- Node.js 16.0以上
- npm

### 開発セットアップ

```bash
# 依存関係のインストール
npm install

# 開発モード（ファイル監視）
npm run dev

# 単発ビルド
npm run build

# クリーンビルド
npm run clean && npm run build
```

### ファイル構成

```
src/
├── content.ts          # メインのコンテンツスクリプト
├── background.ts       # バックグラウンドスクリプト
├── types.d.ts          # 型定義
└── static/
    ├── styles.css      # スタイルシート
    └── icons/          # アイコンファイル
        ├── icon128.png     # 128x128 アイコン（通常状態）
        └── icon128_d.png   # 128x128 アイコン（無効状態）
```

### デバッグ方法

1. **コンテンツスクリプトのデバッグ**
   - GitHub上でF12を押してデベロッパーツールを開く
   - Consoleタブで `Unicoder:` で始まるログを確認

2. **バックグラウンドスクリプトのデバッグ**
   - Chrome拡張機能管理画面 → 「サービスワーカー」をクリック

### 変換ロジックの詳細

拡張機能は以下のロジックでエスケープシーケンスを検出・変換します：

- **Unicodeパターン**: `/\\u([0-9a-fA-F]{4})/g`
  - 例: `\u30AD` → `キ`
- **16進パターン**: `/\\x([0-9a-fA-F]{2})/g`
  - 例: `\x41` → `A`
- **対象要素**: `.blob-code-inner`, `.react-file-line`（GitHubのコード行）
- **効率化**: 既に処理済みの要素は再処理をスキップ
- **変換方式**: `element.textContent` を直接書き換え（元の構造は保持しない）

### パフォーマンス改善

- **重複処理防止**: 処理済み要素を `Set<Element>` で記録してスキップ
- **選択的監視**: 新しいコード要素が追加された場合のみ変換を実行
- **デバウンス処理**: DOM変更の連続発生時は100ms後に処理

## 使用方法

1. GitHub上のページを開く
2. 拡張機能アイコンをクリック
3. 「Unicode変換」トグルをONにする（デフォルトでON）
4. ページが自動的にリロードされ、Unicodeエスケープシーケンスが変換される

## トラブルシューティング

### よくある問題

**Q: 拡張機能が反応しない**
- GitHubページでアイコンの色が変化しているか確認
- アイコンをクリックしてON/OFF状態を切り替えてみる
- ページをリロードしてみる

**Q: 一部の文字が変換されない**
- 正しいエスケープ形式（\uXXXXまたは\xXX）か確認
- Unicodeは16進数4桁、16進エスケープは16進数2桁の形式になっているか確認

**Q: 元の表示に戻したい**
- 拡張機能アイコンをクリックしてOFFにする
- または拡張機能を無効にする

## 貢献

バグ報告や機能要望は、GitHubのIssuesでお気軽にお知らせください。

## ライセンス

MIT License - 詳細は [LICENSE.md](LICENSE.md) を参照してください。
